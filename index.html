<!DOCTYPE html>
<html lang="ru" class="bg-gray-100">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Giftomania üéÅ</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <style>
    .gift-card {
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      cursor: pointer;
    }
    .gift-card:hover, .gift-card:focus-visible {
      transform: scale(1.05);
      box-shadow: 0 8px 24px rgba(139, 92, 246, 0.3);
      outline: none;
    }
    .active-tab {
      border-bottom-width: 2px;
      border-color: #8b5cf6;
      color: #8b5cf6;
    }
    /* –ú–æ–¥–∞–ª–∫–∞ */
    #modal {
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(4px);
      transition: opacity 0.3s ease;
    }
    #modal[hidden] {
      display: none;
    }
    button:focus-visible {
      outline: 2px solid #8b5cf6;
      outline-offset: 2px;
    }
    /* –ü–ª–∞–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ */
    #balance {
      transition: all 0.3s ease;
    }
  </style>
</head>
<body class="font-sans text-gray-900 dark:text-white dark:bg-gray-900 transition-all">

  <script>
    const tg = Telegram.WebApp;
    tg.expand();

    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–º—ã
    const theme = tg.colorScheme || 'light';
    document.documentElement.classList.toggle('dark', theme === 'dark');

    // –ë–∞–ª–∞–Ω—Å
    let balance = Number(localStorage.getItem('balance')) || 100;

    function updateBalanceDisplay() {
      const balanceElem = document.getElementById('balance');
      balanceElem.textContent = ${balance} ‚≠ê;
    }

    function saveBalance() {
      localStorage.setItem('balance', balance);
    }

    window.addEventListener('load', () => {
      updateBalanceDisplay();
      initTabs();
    });
  </script>

  <!-- Header -->
  <header class="bg-purple-600 text-white px-4 py-4 rounded-b-2xl shadow flex items-center justify-between">
    <h1 class="text-xl font-bold select-none">Giftomania üéÅ</h1>
    <span class="text-sm select-none">–ë–∞–ª–∞–Ω—Å: <strong id="balance">...</strong></span>
  </header>

  <!-- Tabs -->
  <nav class="flex justify-around mt-4 text-sm font-semibold text-purple-700 select-none" role="tablist" aria-label="–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã">
    <button id="tab-shop" class="active-tab pb-1 focus:outline-none" role="tab" aria-selected="true" tabindex="0" aria-controls="content-shop">–ú–∞–≥–∞–∑–∏–Ω</button>
    <button id="tab-gifts" class="pb-1 text-gray-500 dark:text-gray-400 focus:outline-none" role="tab" aria-selected="false" tabindex="-1" aria-controls="content-gifts">–ú–æ–∏ –ø–æ–¥–∞—Ä–∫–∏</button>
  </nav>

  <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Ç–∞–±–æ–≤ -->
  <section id="content-shop" role="tabpanel" tabindex="0" aria-labelledby="tab-shop" class="p-4 grid grid-cols-2 gap-4">
    <!-- –ü–æ–¥–∞—Ä–∫–∏ -->
    <div tabindex="0" role="button" aria-pressed="false" aria-label="–ö—É–ø–∏—Ç—å –ü–æ–¥–∞—Ä–æ–∫ —Å–æ –∑–≤—ë–∑–¥–∞–º–∏ –∑–∞ 15 –∑–≤—ë–∑–¥" onclick="openGift('–ü–æ–¥–∞—Ä–æ–∫ —Å–æ –∑–≤—ë–∑–¥–∞–º–∏', 15)" onkeypress="if(event.key==='Enter' || event.key===' ') openGift('–ü–æ–¥–∞—Ä–æ–∫ —Å–æ –∑–≤—ë–∑–¥–∞–º–∏', 15)" class="gift-card bg-white dark:bg-gray-800 rounded-xl p-4 text-center shadow transition">
      <img src="https://img.icons8.com/emoji/48/gift-emoji.png" alt="–ü–æ–¥–∞—Ä–æ–∫ —Å–æ –∑–≤—ë–∑–¥–∞–º–∏" class="mx-auto mb-2 w-10 h-10" />
      <h3 class="font-medium">–ü–æ–¥–∞—Ä–æ–∫ —Å–æ –∑–≤—ë–∑–¥–∞–º–∏</h3>
      <p class="text-sm text-gray-500 dark:text-gray-400">15 ‚≠ê</p>
    </div>
    <div tabindex="0" role="button" aria-pressed="false" aria-label="–ö—É–ø–∏—Ç—å –ë—Ä–æ–Ω–∑–æ–≤—ã–π –ø–æ–¥–∞—Ä–æ–∫ –∑–∞ 25 –∑–≤—ë–∑–¥" onclick="openGift('–ë—Ä–æ–Ω–∑–æ–≤—ã–π –ø–æ–¥–∞—Ä–æ–∫', 25)" onkeypress="if(event.key==='Enter' || event.key===' ') openGift('–ë—Ä–æ–Ω–∑–æ–≤—ã–π –ø–æ–¥–∞—Ä–æ–∫', 25)" class="gift-card bg-white dark:bg-gray-800 rounded-xl p-4 text-center shadow transition">
      <img src="https://img.icons8.com/color/48/gift.png" alt="–ë—Ä–æ–Ω–∑–æ–≤—ã–π –ø–æ–¥–∞—Ä–æ–∫" class="mx-auto mb-2 w-10 h-10" />
      <h3 class="font-medium">–ë—Ä–æ–Ω–∑–æ–≤—ã–π</h3>
      <p class="text-sm text-gray-500 dark:text-gray-400">25 ‚≠ê</p>
    </div>
